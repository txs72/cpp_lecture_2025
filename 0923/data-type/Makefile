# æ•°æ®ç±»å‹ç¤ºä¾‹ç¨‹åº Makefile

# ç¼–è¯‘å™¨è®¾ç½®
CXX = g++
CXXFLAGS = -Wall -Wextra -std=c++17 -g

# ç›®æ ‡æ–‡ä»¶
TARGETS = basic_types arrays_pointers struct_union enum_types modern_types

# é»˜è®¤ç›®æ ‡
all: $(TARGETS)
	@echo "âœ… æ‰€æœ‰æ•°æ®ç±»å‹ç¤ºä¾‹ç¨‹åºç¼–è¯‘å®Œæˆ"

# ç¼–è¯‘è§„åˆ™
basic_types: basic_types.cpp
	@echo "ğŸ”¨ ç¼–è¯‘åŸºæœ¬æ•°æ®ç±»å‹ç¤ºä¾‹..."
	$(CXX) $(CXXFLAGS) -o $@ $<

arrays_pointers: arrays_pointers.cpp
	@echo "ğŸ”¨ ç¼–è¯‘æ•°ç»„å’ŒæŒ‡é’ˆç¤ºä¾‹..."
	$(CXX) $(CXXFLAGS) -o $@ $<

struct_union: struct_union.cpp
	@echo "ğŸ”¨ ç¼–è¯‘ç»“æ„ä½“å’Œè”åˆä½“ç¤ºä¾‹..."
	$(CXX) $(CXXFLAGS) -o $@ $<

enum_types: enum_types.cpp
	@echo "ğŸ”¨ ç¼–è¯‘æšä¸¾ç±»å‹ç¤ºä¾‹..."
	$(CXX) $(CXXFLAGS) -o $@ $<

modern_types: modern_types.cpp
	@echo "ğŸ”¨ ç¼–è¯‘ç°ä»£C++ç±»å‹ç¤ºä¾‹..."
	$(CXX) $(CXXFLAGS) -o $@ $<

# è¿è¡Œæ‰€æœ‰ç¤ºä¾‹
run-all: $(TARGETS)
	@echo "\n=== è¿è¡Œæ‰€æœ‰æ•°æ®ç±»å‹ç¤ºä¾‹ ==="
	@echo "\n--- åŸºæœ¬æ•°æ®ç±»å‹ ---"
	./basic_types
	@echo "\n--- æ•°ç»„å’ŒæŒ‡é’ˆ ---"
	./arrays_pointers
	@echo "\n--- ç»“æ„ä½“å’Œè”åˆä½“ ---"
	./struct_union
	@echo "\n--- æšä¸¾ç±»å‹ ---"
	./enum_types
	@echo "\n--- ç°ä»£C++ç±»å‹ ---"
	./modern_types

# å•ç‹¬è¿è¡Œç¤ºä¾‹
run-basic: basic_types
	./basic_types

run-arrays: arrays_pointers
	./arrays_pointers

run-struct: struct_union
	./struct_union

run-enum: enum_types
	./enum_types

run-modern: modern_types
	./modern_types

# æ¸…ç†
clean:
	@echo "ğŸ§¹ æ¸…ç†ç¼–è¯‘äº§ç‰©..."
	rm -f $(TARGETS)
	@echo "ğŸ§¹ æ¸…ç†è°ƒè¯•ç¬¦å·ç›®å½• (ä»…Macç³»ç»Ÿ)..."
	rm -rf *.dSYM
	@echo "âœ… æ¸…ç†å®Œæˆ"

# é‡æ–°ç¼–è¯‘
rebuild: clean all

# å¸®åŠ©ä¿¡æ¯
help:
	@echo "æ•°æ®ç±»å‹ç¤ºä¾‹ç¨‹åº Makefile"
	@echo ""
	@echo "å¯ç”¨ç›®æ ‡:"
	@echo "  all          - ç¼–è¯‘æ‰€æœ‰ç¤ºä¾‹ç¨‹åº"
	@echo "  basic_types  - ç¼–è¯‘åŸºæœ¬æ•°æ®ç±»å‹ç¤ºä¾‹"
	@echo "  arrays_pointers - ç¼–è¯‘æ•°ç»„å’ŒæŒ‡é’ˆç¤ºä¾‹"
	@echo "  struct_union - ç¼–è¯‘ç»“æ„ä½“å’Œè”åˆä½“ç¤ºä¾‹"
	@echo "  enum_types   - ç¼–è¯‘æšä¸¾ç±»å‹ç¤ºä¾‹"
	@echo "  modern_types - ç¼–è¯‘ç°ä»£C++ç±»å‹ç¤ºä¾‹"
	@echo ""
	@echo "  run-all      - è¿è¡Œæ‰€æœ‰ç¤ºä¾‹ç¨‹åº"
	@echo "  run-basic    - è¿è¡ŒåŸºæœ¬æ•°æ®ç±»å‹ç¤ºä¾‹"
	@echo "  run-arrays   - è¿è¡Œæ•°ç»„å’ŒæŒ‡é’ˆç¤ºä¾‹"
	@echo "  run-struct   - è¿è¡Œç»“æ„ä½“å’Œè”åˆä½“ç¤ºä¾‹"
	@echo "  run-enum     - è¿è¡Œæšä¸¾ç±»å‹ç¤ºä¾‹"
	@echo "  run-modern   - è¿è¡Œç°ä»£C++ç±»å‹ç¤ºä¾‹"
	@echo ""
	@echo "  clean        - æ¸…ç†ç¼–è¯‘äº§ç‰©"
	@echo "  rebuild      - é‡æ–°ç¼–è¯‘æ‰€æœ‰ç¨‹åº"
	@echo "  help         - æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯"

# å£°æ˜ä¼ªç›®æ ‡
.PHONY: all run-all run-basic run-arrays run-struct run-enum run-modern clean rebuild help